meta {
  name: tools-2
  type: http
  seq: 4
}

post {
  url: {{address}}/chat/completions
  body: json
  auth: none
}

headers {
  Content-Type: application/json
  Authorization: {{token}}
}

body:json {
  {
    "model": "x-ai/grok-4-fast:free",
    "messages": [
      {
        "role": "user",
        "content": "What's the weather like in Tehran and Gaza today?"
      },
      {
        "role": "assistant",
        "content": "",
        "tool_calls": [
          {
            "id": "call_31531384",
            "function": {
              "name": "get_weather",
              "arguments": "{\"city\":\"Tehran\"}"
            },
            "index": 0,
            "type": "function"
          },
          {
            "id": "call_05244223",
            "function": {
              "name": "get_weather",
              "arguments": "{\"city\":\"Gaza\"}"
            },
            "index": 1,
            "type": "function"
          }
        ]
      },
      {
        "role": "tool",
        "tool_call_id": "call_31531384",
        "name": "get_weather",
        "content": "{\"temperature\":25,\"condition\":\"sunny\",\"humidity\":40}"
      },
      {
        "role": "tool",
        "tool_call_id": "call_05244223",
        "name": "get_weather",
        "content": "{\"temperature\":28,\"condition\":\"clear\",\"humidity\":55}"
      }
    ],
    "tools": [
      {
        "type": "function",
        "function": {
          "name": "get_weather",
          "description": "Get the current weather forecast for a given city.",
          "parameters": {
            "type": "object",
            "properties": {
              "city": {
                "type": "string",
                "description": "The name of the city (e.g., Tehran) to get the weather for."
              }
            },
            "required": [
              "city"
            ]
          }
        }
      },
      {
        "type": "function",
        "function": {
          "name": "multiply",
          "description": "Multiply two numbers",
          "parameters": {
            "type": "object",
            "properties": {
              "a": {
                "type": "number",
                "description": "First number"
              },
              "b": {
                "type": "number",
                "description": "Second number"
              }
            },
            "required": [
              "a",
              "b"
            ]
          }
        }
      }
    ],
    "tool_choice": "auto",
    "stream": false,
    "temperature": 0
  }
}

settings {
  encodeUrl: false
}
